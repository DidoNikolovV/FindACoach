<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head}"></head>
<nav th:replace="~{fragments/navbar}"></nav>
<body>
<!-- Include your navbar or header here -->
  <div class="container mt-5 justify-content-center align-items-center">
    <input type="hidden" name="username" id="username" th:value="${#authentication.principal.username}">
    <div id="calendar"></div>
  </div>


<!--  <h2>Welcome, <span th:text="${username}"></span>!</h2>-->

<!--  <h3>Your Scheduled Workouts:</h3>-->

<!--  </div>-->

<!--    <ul>-->
<!--      <li th:each="workout : ${scheduledWorkouts}">-->
<!--        <span th:text="${workout.scheduledDateTime}"></span> - <span>Full Body Workout</span>-->
<!--      </li>-->
<!--    </ul>-->

  <footer th:replace="~{fragments/footer}"></footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script th:src="@{/js/evo-calendar.min.js}"></script>
  <script th:src="@{/js/scheduledWorkouts.js}"></script>
<!--  <script>-->
<!--    $(document).ready(function() {-->
<!--      const url = 'http://localhost:8080';-->
<!--      const username = document.getElementById("username").value;-->

<!--      // Function to fetch and update calendar events-->
<!--      function updateCalendarEvents() {-->
<!--        // Fetch scheduled workouts from the backend-->
<!--        fetch(`${url}/api/users/${username}/calendar/scheduledWorkouts`, {-->
<!--          headers: {-->
<!--            "Accept": "application/json"-->
<!--          }-->
<!--        }).then(res => res.json())-->
<!--                .then(data => {-->
<!--                  if (data && data.length > 0) {-->
<!--                    // console.log(data);-->

<!--                    let calendarEvents = data.map(workout => ({-->
<!--                      id: workout.id,-->
<!--                      name: workout.clientName,-->
<!--                      date: moment(workout.scheduledDateTime).format('MM-DD-YYYY'),-->
<!--                      description: "Random desc",-->
<!--                      type: "event"-->
<!--                    }));-->

<!--                    console.log(calendarEvents);-->


<!--                    // Use setCalendarEvents to update the calendar events-->
<!--                    $('#calendar').evoCalendar({-->
<!--                      onMonthChange: updateCalendarEvents,-->
<!--                      onYearChange: updateCalendarEvents,-->
<!--                      calendarEvents: calendarEvents-->
<!--                    });-->
<!--                  }else {-->
<!--                    console.log("No scheduled workouts found.");-->
<!--                  }-->
<!--                })-->
<!--                .catch(error => console.error('Error fetching data:', error));-->
<!--      }-->

<!--      // Fetch and update calendar events on initial load-->
<!--      updateCalendarEvents();-->
<!--    });-->


<!--  </script>-->
</body>
</html>
