<!DOCTYPE html>
<html lang="en">
<head th:replace="~{fragments/head}">

</head>
<nav th:replace="~{fragments/navbar}"></nav>
<body>

<header class="header" th:object="${client}" style="height: 100vh">
    <div class="container">
        <h2 class="text-center text-white" style="margin-top: 7rem;" th:text="*{username} + ' Data'">Client Details</h2>
        <div class="row mt-4">
            <div class="col">
                <div class="card" style="height: 100%">
                    <div class="card-header">
                        Weight Goal
                    </div>
                    <div class="card-body">
                        <p><strong>Target Weight:</strong> <span class="card-text" th:text="*{weight} + ' kg'"></span>
                        </p>
                        <p><strong>Goal Description:</strong>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card" style="height: 100%">
                    <div class="card-header">
                        Nutritional Information
                    </div>
                    <div class="card-body">
                        <p><strong>Caloric Intake Goals:</strong> 2000 calories per day</p>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card" style="height: 100%">
                    <div class="card-header">
                        Appointments and Schedule
                    </div>
                    <div class="card-body">
                        <span class="font-weight-bold">Upcoming Sessions:</span>
                        <p th:each="scheduledWorkout : *{scheduledWorkouts}"
                           th:text="${scheduledWorkout.scheduledDate}"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coach's View: Workouts Completed and Progress -->
        <div class="row mt-4">
            <div class="col">
                <div class="card" style="height: 100%">
                    <div class="card-header">
                        Coach's View
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">Workouts Completed</h5>
                        <input type="hidden" id="clientName" th:value="${client.username}">
                        <ul class="list-group">
                            <li class="list-group-item" th:each="completedWorkout : ${client.completedWorkouts}">
                                <div>
                                    <span th:text="${completedWorkout.workout.name}"></span>
                                    <span th:text="${completedWorkout.name}"></span>
                                    <!-- Add data attributes to store workout details -->
                                    <button type="button" class="btn btn-primary client-workout-details-btn"
                                            id="clientWorkoutDetailsBtn"
                                            th:data-workout-id="${completedWorkout.workout.id}"
                                            th:data-workout-name="${completedWorkout.workout.name}"
                                            th:data-workout-day="${completedWorkout.name}">
                                        Details
                                    </button>
                                </div>
                            </li>
                        </ul>

                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="workoutDetailsModal" tabindex="-1" role="dialog"
                         aria-labelledby="workoutDetailsModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="workoutDetailsModalLabel">Workout Details</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body" id="modal-body">
                                    <h5 id="workoutName"></h5>
                                    <p id="workoutDescription"></p>
                                    <!-- Add more workout details here as needed -->
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="col">
                <div class="card" style="height: 100%">
                    <div class="card-header">
                        Client's Progress
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">Weight Goal Progress</h5>
                        <div class="progress" style="height: 20px;">
                            <div class="progress-bar bg-primary" role="progressbar" style="width: 70%;"
                                 aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">70%
                            </div>
                        </div>
                        <h5 class="card-title mt-4">Workouts Progress</h5>
                        <div class="progress" style="height: 20px;">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 80%;"
                                 aria-valuenow="80" aria-valuemin="0" aria-valuemax="100">80%
                            </div>
                        </div>
                        <h5 class="card-title mt-4">Overall Progress</h5>
                        <div class="progress" style="height: 20px;">
                            <div class="progress-bar bg-info" role="progressbar" style="width: 75%;" aria-valuenow="75"
                                 aria-valuemin="0" aria-valuemax="100">75%
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col">
                    <div class="card" style="height: 100%">
                        <div class="card-header">
                            <h5 class="card-title">Metrics</h5>
                        </div>
                        <div class="card-body">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th>Weight</th>
                                    <th>Calories Intake</th>
                                    <th>Steps Count</th>
                                    <th>Sleep Duration</th>
                                    <th>Mood</th>
                                    <th>Energy Levels</th>
                                    <th>Date</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="metric : ${metrics}">
                                    <td th:text="${metric.weight}"></td>
                                    <td th:text="${metric.caloriesIntake}"></td>
                                    <td th:text="${metric.stepsCount}"></td>
                                    <td th:text="${metric.sleepDuration}"></td>
                                    <td th:text="${metric.mood}"></td>
                                    <td th:text="${metric.energyLevels}"></td>
                                    <td th:text="${metric.date}"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</header>


<footer th:replace="~{fragments/footer}"></footer>
<script th:src="@{/js/client-details.js}"></script>
</body>
</html>
