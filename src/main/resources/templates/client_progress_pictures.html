<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="~{fragments/head}">
    <title>Client Progress</title>
</head>
<body>
<nav th:replace="~{fragments/navbar}"></nav>
<div class="container" style="height: 100vh;">
    <h2 class="text-center" th:text="${client.username} + ' Progress'" style="margin-top: 11rem;"></h2>

    <!-- Display message if any -->
    <div th:if="${message}" class="alert alert-info" role="alert">
        <span th:text="${message}"></span>
    </div>

    <!-- Upload form -->
    <form class="upload-form" method="POST" th:action="@{/clients/{clientUsername}/progress(clientUsername=${client.username})}" enctype="multipart/form-data" style="margin-top: 5rem;">
        <div class="form-row align-items-center">
            <div class="col-sm-9 my-1">
                <input type="file" class="form-control" id="file" name="file" required>
            </div>
            <div class="col-sm-3 my-1">
                <button type="submit" class="btn btn-primary btn-block">Upload</button>
            </div>
        </div>
    </form>

    <!-- Uploaded progressPictures gallery -->
    <h4 class="progress-title text-center">Progress Pictures</h4>
    <div class="row">
        <div th:each="progressPicture: ${progressPictures}" class="col-md-3 mb-3">
            <div class="card" style="margin-top: 2rem; padding-left: 1rem;">
                <img th:src="${progressPicture.url}" class="card-img-top" alt="Progress progressPicture" style="height: 300px; width: 300px;">
            </div>
        </div>
    </div>

    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <li th:if="${progressPictures.hasPrevious()}" class="page-item">
                <a th:href="@{'/clients/' + ${client.username} + '/progress?page=' + ${progressPictures.number - 1}}" class="page-link">&lt; Prev</a>
            </li>
            <li th:each="page : ${#numbers.sequence(0, progressPictures.totalPages - 1)}"
                th:class="${page} == ${progressPictures.number} ? 'page-item active' : 'page-item'">
                <a th:href="@{'/clients/' + ${client.username} + '/progress?page=' + ${page}}" class="page-link" th:text="${page + 1}"></a>
            </li>
            <li th:if="${progressPictures.hasNext()}" class="page-item">
                <a th:href="@{'/clients/' + ${client.username} + '/progress?page=' + ${progressPictures.number + 1}}" class="page-link">Next &gt;</a>
            </li>
        </ul>
    </nav>
</div>
<footer th:replace="~{fragments/footer}"></footer>
</body>
</html>
