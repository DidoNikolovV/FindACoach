<!DOCTYPE html>
<html lang="en">
<head th:replace="~{fragments/head}">

</head>
<body>
  <div>
    <nav th:replace="~{fragments/navbar}"></nav>
  </div>

  <div class="container mt-5">
    <h2 class="text-center mb-2 mt-5 text-white">Men's Clothing</h2>

    <form th:action="@{/clothes-men}" th:method="post">
      <div class="row row-cols-1 row-cols-md-3">
        <!-- Sample Men's Clothing Items -->
        <div class="col mb-3" th:each="cloth: ${menClothes.getContent()}" th:object="${cloth}">
          <div class="card bg-dark h-100 mt-4" >
            <img class="card-img-top" th:src="*{imgUrl}" alt="Men's Item 1" style="max-height: 250px; object-fit: cover;">
            <div class="card-body">
              <h5 class="card-title" th:text="*{name}">Men's Item 1</h5>
              <p class="card-text" th:text="*{description}">Description of Men's Item 1.</p>
            </div>
            <div class="card-footer bg-light text-center bg-dark">
              <p class="card-text font-weight-bold" th:text="*{price}">$29.99</p>
              <button type="submit" class="btn btn-primary btn-sm">
                <input type="hidden" name="selectedClothId" th:id="'cloth-' + *{id}" th:value="*{id}" />
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </form>



    <!-- Pagination Controls -->
    <div th:if="${menClothes.totalPages > 1}" class="mt-3 mb-5 fixed-bottom">
      <ul class="pagination justify-content-center">
        <li th:if="${menClothes.number > 0}" class="page-item">
          <a th:href="@{${'/clothes-men'}(page=${menClothes.number - 1})}" class="page-link">&lt; Prev</a>
        </li>
        <li th:each="page : ${#numbers.sequence(0, menClothes.totalPages - 1)}" th:class="${page} == ${menClothes.number} ? 'page-item active' : 'page-item'">
          <a th:href="@{${'/clothes-men'}(page=${page})}" class="page-link" th:text="${page + 1}"></a>
        </li>
        <li th:if="${menClothes.number + 1 < menClothes.totalPages}" class="page-item">
          <a th:href="@{${'/clothes-men'}(page=${menClothes.number + 1})}" class="page-link">Next &gt;</a>
        </li>
      </ul>
    </div>


      <!-- Add more cards for Men's clothing items as needed -->
    </div>
  <div>
    <footer th:replace="~{fragments/footer}"></footer>
  </div>

  <script>
    $(document).ready(function() {
      $(".add-to-cart-btn").click(function(e) {
        e.preventDefault();
        var clothId = $(this).data("cloth-id");
        var userId = $(this).data("user-id");

        $.ajax({
          type: "POST",
          url: "/clothes-men",
          data: {
            selectedClothesIds: clothId,
            userId: userId
          },
          success: function() {
            // Update the specific part of the page with the new data
            // You can use a separate endpoint to return the updated cloth list
            // and replace the content dynamically using JavaScript
          }
        });
      });
    });
  </script>

</body>
</html>
